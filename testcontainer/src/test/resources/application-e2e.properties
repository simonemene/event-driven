#source,processor,sink
spring.cloud.function.definition=orderCheckAvailable,consumer
spring.cloud.config.enabled=false
spring.config.import=
spring.scheduling.time=500
spring.scheduled.delay=200


#source
spring.cloud.stream.bindings.order-out-0.destination=order-topic
spring.cloud.stream.bindings.order-out-0.content-type=application/json
source.nameBridge=order-topic
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer

resilience4j.circuitbreaker.instances.kafkaProducer.failureRateThreshold=50
resilience4j.circuitbreaker.instances.kafkaProducer.slidingWindowSize=10
resilience4j.circuitbreaker.instances.kafkaProducer.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.kafkaProducer.waitDurationInOpenState=30s

spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.retry.backoff.ms=500
spring.kafka.producer.delivery.timeout.ms=120000
spring.kafka.producer.request.timeout.ms=5000
spring.kafka.producer.max.block.ms=5000

#sink
spring.cloud.stream.bindings.consumer-in-0.destination=stock-topic
spring.cloud.stream.bindings.consumer-in-0.group=sink-group
spring.cloud.stream.kafka.bindings.consumer-in-0.consumer.consumer.startOffset=earliest



spring.cloud.stream.kafka.bindings.consumer-in-0.consumer.enable-dlq=true
spring.cloud.stream.kafka.bindings.consumer-in-0.consumer.dlq-name=stock-topic.dlq

#processor
spring.cloud.stream.bindings.orderCheckAvailable-out-0.destination=stock-topic
spring.cloud.stream.bindings.orderCheckAvailable-in-0.destination=order-topic
spring.cloud.stream.bindings.orderCheckAvailable-in-0.group=check-available-group
spring.cloud.stream.kafka.bindings.orderCheckAvailable-in-0.consumer.enable-dlq=true
spring.cloud.stream.kafka.bindings.orderCheckAvailable-in-0.consumer.dlq-name=order-topic.dlq
spring.cloud.stream.kafka.bindings.orderCheckAvailable-in-0.consumer.consumer.startOffset=earliest

#jpa
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.default_schema=test


#flyway
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.schemas=test
spring.flyway.default-schema=test



